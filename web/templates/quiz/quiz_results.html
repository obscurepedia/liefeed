{% extends "quiz/quiz_results_base.html" %}

{% block content %}
<script>
  // Track quiz completion as a Lead
  if (typeof fbq === 'function') {
    fbq('track', 'Lead');
    fbq('trackCustom', 'CompleteQuiz');
  }

  // Redirect to Bonus Reward page after 5 seconds
  setTimeout(function() {
    window.location.href = "{{ url_for('quiz.bonus_reward') }}";
  }, 5000);
</script>

<div class="result-box">
  <div class="result-frame">
    <h1 class="result-heading">Your Results</h1>
    <p class="result-score">You scored <strong>{{ score }}</strong> out of <strong>{{ total }}</strong>.</p>
    <div class="result-feedback">
      {{ result_feedback }}
    </div>
  </div>

  <div class="result-frame">
    <p class="certificate-msg">
      ðŸŽ“ Hold tight, Agent {{ name }}.<br>
      Your certificate is being encrypted, sealed, and emailed.<br>
      Prepare for your next briefing...
    </p>

    <div style="margin-top: 30px;">
      <div style="height: 10px; background: #eee; border-radius: 5px; overflow: hidden;">
        <div style="width: 0%; height: 100%; background: #0077cc; animation: progressAnim 5s linear forwards;"></div>
      </div>
    </div>
  </div>
</div>

<style>
@keyframes progressAnim {
  from { width: 0%; }
  to { width: 100%; }
}
</style>
{% endblock %}
