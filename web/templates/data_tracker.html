{% extends "base.html" %}

{% block content %}
<h1>ðŸ“Š Data Tracker</h1>

<form method="POST" class="ad-form">
    <label>Date: <input type="date" name="date" value="{{ date.today() }}"></label><br>
    <label>Spend (Â£): <input type="number" name="spend" step="0.01" required></label><br>
    <label>Impressions: <input type="number" name="impressions"></label><br>
    <label>Clicks: <input type="number" name="clicks"></label><br>
    <label>Leads: <input type="number" name="leads"></label><br>
    <label>Notes: <textarea name="notes" rows="2" cols="40"></textarea></label><br>
    <label>Reach: <input type="number" name="reach"></label><br>
    <label>Frequency: <input type="number" name="frequency" step="0.1"></label><br>
    <label>Campaign Name: <input type="text" name="campaign_name"></label><br>
    <button type="submit">ðŸ’¾ Save Entry</button>
</form>

<hr>

<h2>ðŸ“… Ad Performance Log</h2>
<table border="1" cellpadding="6" cellspacing="0">
    <thead>
        <tr>
            <th>Date</th>
            <th>Campaign</th>
            <th>Spend (Â£)</th>
            <th>Impressions</th>
            <th>Clicks</th>
            <th>Leads</th>
            <th>CTR (%)</th>
            <th>CPC (Â£)</th>
            <th>Conv. Rate (%)</th>
            <th>CPL (Â£)</th>
            <th>Reach</th>
            <th>Frequency</th>
            <th>Notes</th>
        </tr>
    </thead>

    <tbody>
        {% for row in rows %}
        <tr>
            <td>{{ row.date }}</td>
            <td>{{ row.campaign_name or "-" }}</td>
            <td>{{ row.spend or "-" }}</td>
            <td>{{ row.impressions or "-" }}</td>
            <td>{{ row.clicks or "-" }}</td>
            <td>{{ row.leads or "-" }}</td>
            <td>{{ row.ctr if row.ctr is not none else "-" }}</td>
            <td>{{ row.cpc if row.cpc is not none else "-" }}</td>
            <td>{{ row.conversion_rate if row.conversion_rate is not none else "-" }}</td>
            <td>{{ row.cpl if row.cpl is not none else "-" }}</td>
            <td>{{ row.reach or "-" }}</td>
            <td>{{ row.frequency or "-" }}</td>
            <td>{{ row.notes or "-" }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<form method="POST" action="{{ url_for('analyze_data') }}">
    <button type="submit">ðŸ§  Analyze with AI</button>
</form>

{% endblock %}
